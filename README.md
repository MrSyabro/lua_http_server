# Простой HTTP сервер на Lua

Это простейший WEB сервер написанный на языке Lua.

## Возможности
Сервер умеет все, что нужно на один раз.
* Отдавать файлы по запросу в браузере
* Исполнять Lua скрипты, а результат отдавать браузеру. Просто создайте файл с расширением `.lua` в директории программы и введите путь в адресной строке. Файл будет выполнен, а результат отправится в браузер.

## Требования

1. `luasocket`

Да, он работает лишь с сокетами.

## Инструкция

Удостовертесь, что у вас открыт порт 8080. Он установлен по умолчанию.

Поместите файлы в одну папку с сервером и запустите `http_server.lua`.

У сервера есть несколько простых параметров. Отредактируйте их в файле `http_server.lua`:
- `PORT` - порт сервера
- `BACKLOG` - количество одновременных запросов серверу
- `ROOT_DIR` - корневая директория сервера

Если Вы установили сервер через `luarocks`, запустить его можно командой `http_server <root_dir>`. Вписав вместо `<root_dir>` полный путь к желаемой папке с файлами.

## Пример

Файлы в папке:
- `html_server.lua` - Собственно сам сервер*
- `aliases.lua` - скрипт, содержащий правила подмены URL или имен файлов
- `index.html` - Простой html файл. Отдается браузеру в исходном виде.
- `index.lua` - Исполняется. Отдает html разметку с именем файла и ссылкой на второй файл `dump-headers.lua`
- `dump-headers.lua` - Исполняется. Отдает разметку таблицы заголовков запроса `http`
- `getfile.lua` - С аргументом `name` позволяет загрузить файл.
- `payload.lua` - Файл генерирует полезную нагрузку в 1ГБ для демонстрации паралельной обработки запросов.
- `test.html` - Содержит набор символов для симуляции полезной нагрузки.
- `test_client.lua` - Создает определенное колличество одновременных соединений с сервером и выводит результаты быстродействия.
- `files.lua` - Примитивный список файлов с возможностью отоброзить в браузере или скачать файл.

*обязательные файлы
